---
import MainLayout from '../../layouts/MainLayout.astro';
import { getCollection } from 'astro:content';
import BlogPostCard from '../../components/BlogPostCard.astro';

const allPosts = await getCollection('blog');
const sortedPosts = allPosts.sort(
    (a, b) => new Date(b.data.pubDate).valueOf() - new Date(a.data.pubDate).valueOf()
);
---
<MainLayout 
    title="Home" 
    description="Your daily brew of the latest in tech, gadgets, and AI."
>
    <div class="text-center mb-12">
        <h1 class="text-5xl font-bold text-slate-100">TechBrew Daily</h1>
        <p class="text-lg text-slate-400 mt-2">Your daily digest of what matters in tech.</p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {sortedPosts.map(post => (
            <BlogPostCard post={post} />
        ))}
    </div>
</MainLayout>